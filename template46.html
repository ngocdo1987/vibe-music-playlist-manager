<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steampunk Audio Mechanism</title>
    
    <!-- Fonts: Rye (Old West/Victorian) & Cinzel (Classic Roman) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Rye&display=swap" rel="stylesheet">

    <style>
        :root {
            --brass: #b8860b;
            --brass-light: #e6c27c;
            --brass-dark: #8b6508;
            --iron: #2c3e50;
            --leather: #3e2723;
            --parchment: #f5e6ca;
            --steam: rgba(255, 255, 255, 0.1);
            
            --font-victorian: 'Rye', serif;
            --font-roman: 'Cinzel', serif;
        }

        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #1a1a1a;
            background-image: 
                repeating-linear-gradient(45deg, #222 0, #222 2px, #1a1a1a 2px, #1a1a1a 10px);
            color: var(--parchment);
            font-family: var(--font-roman);
            overflow: hidden;
        }

        /* --- Main Mechanism Frame --- */
        .steam-device {
            width: 450px;
            background: var(--leather);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 
                inset 0 0 50px #000,
                0 20px 50px rgba(0,0,0,0.8),
                0 0 0 5px #4a3c31;
            position: relative;
            border: 2px solid #5d4037;
        }

        /* Rivets */
        .rivet {
            position: absolute;
            width: 12px;
            height: 12px;
            background: radial-gradient(circle, var(--brass-light), var(--brass-dark));
            border-radius: 50%;
            box-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            z-index: 10;
        }
        .tl { top: 10px; left: 10px; } .tr { top: 10px; right: 10px; }
        .bl { bottom: 10px; left: 10px; } .br { bottom: 10px; right: 10px; }

        /* --- Top Plate (Gauge) --- */
        .metal-plate {
            background: linear-gradient(to bottom, var(--brass), var(--brass-dark));
            border: 2px solid #5a4a1f;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: inset 0 2px 5px rgba(255,255,255,0.3), 0 5px 10px rgba(0,0,0,0.5);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        /* Texture overlay */
        .metal-plate::after {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.2'/%3E%3C/svg%3E");
            opacity: 0.4;
            pointer-events: none;
        }

        .device-title {
            font-family: var(--font-victorian);
            color: #2c1e10;
            text-shadow: 1px 1px 0 rgba(255,255,255,0.4);
            font-size: 1.8rem;
            margin: 0 0 15px 0;
            border-bottom: 1px solid #5a4a1f;
            padding-bottom: 5px;
        }

        /* Gauge */
        .gauge-container {
            width: 150px;
            height: 80px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }

        .gauge-bg {
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, #fff 60%, #ddd 100%);
            border-radius: 50%;
            border: 5px solid #4a3c31;
            position: absolute;
            top: 0;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
        }

        .gauge-needle {
            width: 4px;
            height: 65px;
            background: #c0392b;
            position: absolute;
            bottom: 0;
            left: 50%;
            transform-origin: bottom center;
            transform: rotate(-90deg);
            transition: transform 0.2s cubic-bezier(0.4, 2.08, 0.55, 0.44); /* Bouncy needle */
            z-index: 2;
            border-radius: 2px;
        }

        .gauge-center {
            width: 15px;
            height: 15px;
            background: var(--brass-dark);
            border-radius: 50%;
            position: absolute;
            bottom: -7px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 3;
            box-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .gauge-label {
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            color: #2c1e10;
            margin-top: 5px;
            display: flex;
            justify-content: space-between;
            font-weight: bold;
        }

        /* --- Middle: Gears & Info --- */
        .mechanism-core {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 10px;
            background: rgba(0,0,0,0.2);
            border-radius: 5px;
            border: 1px solid #4a3c31;
        }

        .gears-visual {
            width: 100px;
            height: 100px;
            position: relative;
        }

        .gear {
            position: absolute;
            fill: var(--brass);
            filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.5));
        }

        .gear-large {
            width: 80px;
            height: 80px;
            top: 10px; left: 10px;
            z-index: 1;
        }

        .gear-small {
            width: 50px;
            height: 50px;
            bottom: 0; right: 0;
            z-index: 2;
            fill: var(--brass-dark);
        }

        /* Animation classes */
        .rotate-cw { animation: spin 8s linear infinite; }
        .rotate-ccw { animation: spin-rev 5.3s linear infinite; } /* 8 * (50/80) approx ratio */

        @keyframes spin { 100% { transform: rotate(360deg); } }
        @keyframes spin-rev { 100% { transform: rotate(-360deg); } }

        .track-parchment {
            flex: 1;
            padding: 15px;
            background: var(--parchment);
            color: #3e2723;
            border: 1px solid #5d4037;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.1);
            position: relative;
            clip-path: polygon(0 0, 100% 0, 95% 100%, 5% 100%);
            margin: 0 15px;
            text-align: center;
        }

        .track-title {
            font-family: var(--font-victorian);
            font-size: 1.1rem;
            margin-bottom: 5px;
            line-height: 1.2;
        }

        .track-artist {
            font-size: 0.8rem;
            font-style: italic;
        }

        /* --- Bottom Controls --- */
        .controls-deck {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .btn-brass {
            width: 50px;
            height: 50px;
            background: radial-gradient(circle, var(--brass-light), var(--brass-dark));
            border: 2px solid #4a3c31;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 0 #5a4a1f, 0 5px 10px rgba(0,0,0,0.5);
            transition: all 0.1s;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #2c1e10;
            font-family: var(--font-roman);
            font-weight: bold;
        }

        .btn-brass:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #5a4a1f, inset 0 2px 5px rgba(0,0,0,0.5);
        }

        .btn-large {
            width: 65px;
            height: 65px;
            font-size: 1.2rem;
        }

        /* --- Playlist --- */
        .index-drawer {
            background: #2c3e50;
            border: 2px solid var(--brass);
            padding: 10px;
            height: 120px;
            overflow-y: auto;
            box-shadow: inset 0 0 20px #000;
        }

        .scroll-track {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .scroll-item {
            padding: 8px 12px;
            border-bottom: 1px solid rgba(184, 134, 11, 0.3);
            cursor: pointer;
            color: var(--parchment);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            transition: background 0.2s;
        }

        .scroll-item:hover {
            background: rgba(184, 134, 11, 0.2);
            padding-left: 18px;
        }

        .scroll-item.active {
            background: rgba(184, 134, 11, 0.4);
            font-weight: bold;
            border-left: 3px solid var(--brass-light);
        }

        .lamp {
            width: 8px;
            height: 8px;
            background: #444;
            border-radius: 50%;
            margin-right: 10px;
            border: 1px solid #000;
        }

        .scroll-item.active .lamp {
            background: #ffeb3b;
            box-shadow: 0 0 5px #ffeb3b;
        }

        /* Scrollbar */
        .index-drawer::-webkit-scrollbar { width: 8px; }
        .index-drawer::-webkit-scrollbar-track { background: #1a1a1a; }
        .index-drawer::-webkit-scrollbar-thumb { background: var(--brass-dark); border-radius: 4px; }

    </style>
</head>
<body>

    <div class="steam-device">
        <!-- Rivets -->
        <div class="rivet tl"></div><div class="rivet tr"></div>
        <div class="rivet bl"></div><div class="rivet br"></div>

        <!-- Top Plate -->
        <div class="metal-plate">
            <h1 class="device-title">Aetheric Audio</h1>
            
            <div class="gauge-container">
                <div class="gauge-bg"></div>
                <div class="gauge-needle" id="needle"></div>
                <div class="gauge-center"></div>
            </div>
            
            <div class="gauge-label">
                <span id="currentTime">0:00</span>
                <span>PSI</span>
                <span id="duration">0:00</span>
            </div>
        </div>

        <!-- Middle Mechanism -->
        <div class="mechanism-core">
            <!-- SVG Gears -->
            <div class="gears-visual">
                <!-- Large Gear -->
                <svg class="gear gear-large rotate-cw" id="gearBig" viewBox="0 0 24 24" style="animation-play-state: paused;">
                   <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.35 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.35 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,13L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.95C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.95L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" />
                </svg>
                <!-- Small Gear -->
                <svg class="gear gear-small rotate-ccw" id="gearSmall" viewBox="0 0 24 24" style="animation-play-state: paused;">
                    <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.35 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.35 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,13L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.95C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.95L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" />
                </svg>
            </div>

            <div class="track-parchment">
                <div class="track-title" id="titleDisplay">STOPPED</div>
                <div class="track-artist" id="artistDisplay">Waiting...</div>
            </div>
        </div>

        <!-- Controls -->
        <div class="controls-deck">
            <button class="btn-brass" id="prevBtn" title="Previous">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
            </button>
            <button class="btn-brass btn-large" id="playBtn" title="Play">
                <svg id="iconPlay" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                <svg id="iconPause" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="display:none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
            </button>
            <button class="btn-brass" id="stopBtn" title="Stop">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h12v12H6z"/></svg>
            </button>
            <button class="btn-brass" id="nextBtn" title="Next">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
            </button>
        </div>

        <!-- Playlist -->
        <div class="index-drawer">
            <ul class="scroll-track" id="playlist">
                <!-- JS Injected -->
            </ul>
        </div>

    </div>

    <audio id="audioPlayer"></audio>

    <script>
        const songs = [
            {
                title: "I Just Called To Say I Love You",
                artist: "Stevie Wonder",
                url: "https://music.giau.info/mp3/1765329418087_I_Just_Called_To_Say_I_Love_You.mp3"
            },
            {
                title: "Another Day In Paradise",
                artist: "Phil Collins",
                url: "https://music.giau.info/mp3/1765329417208_Another_Day_In_Paradise.mp3"
            },
            {
                title: "If Life Is So Short",
                artist: "The Moffatts",
                url: "https://music.giau.info/mp3/1765329418894_If_Life_Is_So_Short.mp3"
            }
        ];

        const audio = document.getElementById('audioPlayer');
        const playBtn = document.getElementById('playBtn');
        const stopBtn = document.getElementById('stopBtn');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const iconPlay = document.getElementById('iconPlay');
        const iconPause = document.getElementById('iconPause');
        
        const needle = document.getElementById('needle');
        const currentTimeEl = document.getElementById('currentTime');
        const durationEl = document.getElementById('duration');
        const titleDisplay = document.getElementById('titleDisplay');
        const artistDisplay = document.getElementById('artistDisplay');
        const gearBig = document.getElementById('gearBig');
        const gearSmall = document.getElementById('gearSmall');
        const playlistEl = document.getElementById('playlist');

        let currentIdx = 0;

        function init() {
            renderPlaylist();
            loadTrack(0);
            setupListeners();
        }

        function loadTrack(index) {
            currentIdx = index;
            const song = songs[index];
            audio.src = song.url;
            
            titleDisplay.textContent = song.title;
            artistDisplay.textContent = song.artist;
            
            updatePlaylistUI();
            resetGauge();
        }

        function togglePlay() {
            if (audio.paused) playAudio();
            else pauseAudio();
        }

        function playAudio() {
            audio.play();
            iconPlay.style.display = 'none';
            iconPause.style.display = 'block';
            // Start Gears
            gearBig.style.animationPlayState = 'running';
            gearSmall.style.animationPlayState = 'running';
        }

        function pauseAudio() {
            audio.pause();
            iconPlay.style.display = 'block';
            iconPause.style.display = 'none';
            // Pause Gears
            gearBig.style.animationPlayState = 'paused';
            gearSmall.style.animationPlayState = 'paused';
        }

        function stopAudio() {
            pauseAudio();
            audio.currentTime = 0;
            resetGauge();
        }

        function nextTrack() {
            currentIdx = (currentIdx + 1) % songs.length;
            loadTrack(currentIdx);
            playAudio();
        }

        function prevTrack() {
            currentIdx = (currentIdx - 1 + songs.length) % songs.length;
            loadTrack(currentIdx);
            playAudio();
        }

        function updateGauge() {
            if(audio.duration) {
                const percent = audio.currentTime / audio.duration;
                // Map 0-1 to -90deg to +90deg
                const deg = -90 + (percent * 180);
                needle.style.transform = `rotate(${deg}deg)`;
                
                const curM = Math.floor(audio.currentTime / 60);
                const curS = Math.floor(audio.currentTime % 60);
                const durM = Math.floor(audio.duration / 60);
                const durS = Math.floor(audio.duration % 60);
                
                currentTimeEl.textContent = `${curM}:${curS < 10 ? '0'+curS : curS}`;
                durationEl.textContent = `${durM}:${durS < 10 ? '0'+durS : durS}`;
            }
        }

        function resetGauge() {
            needle.style.transform = `rotate(-90deg)`;
            currentTimeEl.textContent = "0:00";
            durationEl.textContent = "0:00";
        }

        function renderPlaylist() {
            playlistEl.innerHTML = '';
            songs.forEach((song, idx) => {
                const li = document.createElement('li');
                li.className = 'scroll-item';
                li.innerHTML = `
                    <div class="lamp"></div>
                    <span>${song.title}</span>
                `;
                li.onclick = () => {
                    loadTrack(idx);
                    playAudio();
                };
                playlistEl.appendChild(li);
            });
        }

        function updatePlaylistUI() {
            const items = document.querySelectorAll('.scroll-item');
            items.forEach((item, idx) => {
                item.classList.toggle('active', idx === currentIdx);
            });
        }

        function setupListeners() {
            playBtn.addEventListener('click', togglePlay);
            stopBtn.addEventListener('click', stopAudio);
            nextBtn.addEventListener('click', nextTrack);
            prevBtn.addEventListener('click', prevTrack);
            
            audio.addEventListener('timeupdate', updateGauge);
            audio.addEventListener('ended', nextTrack);
        }

        init();
    </script>
</body>
</html>