
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title><%= currentPlaylist ? currentPlaylist.name : 'Music Playlists' %> - Music Player</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css">
<style type="text/css">
	body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: white;
    }
</style>
  </head>

  <body>
    <div class="container player-container">
        <div class="text-center mt-4">
          <a href="/" class="btn btn-light">
            <i class="bi bi-arrow-left"></i> Back to Playlists
          </a>
        </div>
    </div>
    <% if (songs.length > 0) { %>
    <div id="app" style="height: 100vh">
      <!-- Webamp will attempt to center itself within this div -->
    </div>
    <script type="module">
      import Webamp from "https://unpkg.com/webamp@^2/butterchurn";
      const webamp = new Webamp({
        initialTracks: [
          <% songs.forEach((song, index) => { %>  
          {
            metaData: {
              artist: "<%= index + 1 %>. <%= song.original_name %>",
              title: "<%= index + 1 %>. <%= song.original_name %>",
            },
            url: "/<%= song.file_path %>",
            duration: 5.322286,
          },
          <% }) %>
        ],
      });

      webamp.renderWhenReady(document.getElementById("app"));
    </script>
    <% } %>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
