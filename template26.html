<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arcane Grimoire Player</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Lato:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            /* Fantasy Palette */
            --stone-bg: #1a120b;
            --parchment: #d4c5a0;
            --gold-bright: #ffd700;
            --gold-dark: #b8860b;
            --mana-blue: #00ffff;
            --void-purple: #2e0249;
            
            /* Typography */
            --font-fantasy: 'Cinzel Decorative', serif;
            --font-ui: 'Lato', sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            user-select: none;
        }

        body {
            background-color: var(--stone-bg);
            background-image: 
                radial-gradient(circle at 50% 30%, var(--void-purple), var(--stone-bg)),
                url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.08'/%3E%3C/svg%3E");
            color: var(--parchment);
            font-family: var(--font-ui);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        /* --- Magical Atmosphere --- */
        .magic-dust {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .dust-mote {
            position: absolute;
            background: var(--gold-bright);
            border-radius: 50%;
            opacity: 0.6;
            box-shadow: 0 0 5px var(--gold-bright);
            animation: floatMote 10s infinite linear;
        }

        @keyframes floatMote {
            0% { transform: translateY(100vh) scale(0); opacity: 0; }
            50% { opacity: 0.8; }
            100% { transform: translateY(-10vh) scale(1); opacity: 0; }
        }

        /* --- The Grimoire Frame --- */
        .grimoire {
            position: relative;
            width: 900px;
            max-width: 95%;
            background: #2b1d0e;
            /* Wood Texture Pattern */
            background-image: repeating-linear-gradient(45deg, #26180f 0, #26180f 10px, #2b1d0e 10px, #2b1d0e 20px);
            border: 8px solid var(--gold-dark);
            border-radius: 8px;
            box-shadow: 
                0 0 0 2px var(--gold-bright),
                0 0 0 6px var(--gold-dark),
                0 30px 60px rgba(0,0,0,0.8),
                inset 0 0 50px rgba(0,0,0,0.8);
            display: grid;
            grid-template-columns: 1.5fr 1fr;
            padding: 15px; /* Gap for inner border */
            z-index: 10;
        }

        /* Inner Parchment Screen */
        .parchment-screen {
            background: radial-gradient(circle, #e8dcc5, #d4c5a0);
            border: 2px solid var(--gold-dark);
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            padding: 30px;
            position: relative;
            /* Texture Overlay */
            box-shadow: inset 0 0 40px rgba(0,0,0,0.2);
        }

        /* Corner Ornaments */
        .corner-ornament {
            position: absolute;
            width: 30px; height: 30px;
            border: 3px solid var(--gold-bright);
            z-index: 5;
        }
        .tl { top: 5px; left: 5px; border-right: none; border-bottom: none; }
        .tr { top: 5px; right: 5px; border-left: none; border-bottom: none; }
        .bl { bottom: 5px; left: 5px; border-right: none; border-top: none; }
        .br { bottom: 5px; right: 5px; border-left: none; border-top: none; }

        /* --- Left Section: The Altar --- */
        .altar-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-right: 2px dashed var(--gold-dark);
            padding-right: 30px;
        }

        .spell-header {
            font-family: var(--font-fantasy);
            font-size: 2rem;
            color: #4a3c31;
            margin-bottom: 30px;
            text-shadow: 1px 1px 0px rgba(255,255,255,0.4);
            text-align: center;
        }

        /* The Mana Orb Visualizer */
        .orb-container {
            width: 200px;
            height: 200px;
            position: relative;
            margin-bottom: 30px;
        }

        .runic-circle {
            width: 100%; height: 100%;
            border-radius: 50%;
            border: 4px solid var(--gold-dark);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.3);
        }

        /* Rotating Runes */
        .runic-ring {
            position: absolute;
            top: -10px; left: -10px; right: -10px; bottom: -10px;
            border: 1px dashed var(--gold-bright);
            border-radius: 50%;
            opacity: 0.5;
            animation: spinRune 20s linear infinite;
        }
        
        .altar-section.playing .runic-ring {
            animation-duration: 5s;
            border-color: var(--mana-blue);
        }

        @keyframes spinRune { 100% { transform: rotate(360deg); } }

        .mana-orb {
            width: 120px; height: 120px;
            background: radial-gradient(circle at 30% 30%, #fff, var(--mana-blue));
            border-radius: 50%;
            box-shadow: 
                0 0 30px var(--mana-blue),
                0 0 60px var(--gold-bright);
            z-index: 2;
            transition: all 0.5s ease;
        }

        .altar-section.playing .mana-orb {
            animation: pulseOrb 2s infinite ease-in-out;
        }

        @keyframes pulseOrb {
            0%, 100% { transform: scale(1); box-shadow: 0 0 30px var(--mana-blue); }
            50% { transform: scale(1.1); box-shadow: 0 0 50px var(--mana-blue); }
        }

        /* Song Data */
        .scroll-data {
            text-align: center;
            background: rgba(255,255,255,0.4);
            padding: 15px;
            border: 1px solid #b08d55;
            border-radius: 4px;
            margin-bottom: 20px;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
        }

        .scroll-title {
            font-family: var(--font-fantasy);
            font-size: 1.8rem;
            color: #4a3c31;
            margin-bottom: 5px;
        }

        .scroll-artist {
            font-size: 1rem;
            color: #6b5344;
            font-weight: bold;
            text-transform: uppercase;
        }

        /* Mana Progress */
        .mana-bar-container {
            width: 100%;
            height: 10px;
            background: #5c4033;
            border-radius: 5px;
            border: 1px solid var(--gold-dark);
            overflow: hidden;
            margin-bottom: 30px;
        }

        .mana-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--gold-dark), var(--mana-blue));
            box-shadow: 0 0 10px var(--mana-blue);
            transition: width 0.2s linear;
        }

        /* Controls: Runes */
        .runic-controls {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .btn-rune {
            width: 60px; height: 60px;
            background: transparent;
            border: 2px solid #4a3c31;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4a3c31;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .btn-rune:hover {
            background: rgba(0, 255, 255, 0.1);
            border-color: var(--mana-blue);
            box-shadow: 0 0 15px var(--mana-blue);
            transform: scale(1.1);
        }
        
        .btn-rune:active {
            transform: scale(0.95);
        }

        .btn-rune svg {
            width: 24px; height: 24px;
            fill: currentColor;
        }

        .btn-rune.main-rune {
            width: 80px; height: 80px;
            border-width: 3px;
            background: linear-gradient(135deg, #f9f1d8, #d4c5a0);
        }

        /* --- Right Section: Quest Log --- */
        .quest-log {
            padding-left: 30px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .log-title {
            font-family: var(--font-fantasy);
            font-size: 1.5rem;
            color: var(--gold-dark);
            border-bottom: 2px solid var(--gold-dark);
            padding-bottom: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .spell-list {
            list-style: none;
            overflow-y: auto;
            flex-grow: 1;
        }

        .spell-card {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 15px;
            background: rgba(255,255,255,0.3);
            border: 1px solid rgba(180, 141, 85, 0.3);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .spell-card::before {
            content: '';
            position: absolute;
            left: 5px; top: 50%; transform: translateY(-50%);
            width: 8px; height: 8px;
            border-radius: 50%;
            background: #4a3c31;
            opacity: 0.3;
            transition: all 0.3s;
        }

        .spell-card:hover {
            background: rgba(255,255,255,0.6);
            transform: translateX(-5px);
            border-color: var(--gold-dark);
        }

        .spell-card.active {
            background: #fff;
            border: 2px solid var(--mana-blue);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
            transform: scale(1.02);
        }

        .spell-card.active::before {
            background: var(--mana-blue);
            box-shadow: 0 0 10px var(--mana-blue);
            opacity: 1;
        }

        .card-content {
            display: flex;
            flex-direction: column;
        }

        .card-name {
            font-family: var(--font-fantasy);
            font-size: 1.2rem;
            color: #2b1d0e;
            margin-bottom: 2px;
        }

        .card-sub {
            font-size: 0.8rem;
            color: #6b5344;
        }

        /* Scrollbar */
        .spell-list::-webkit-scrollbar { width: 8px; }
        .spell-list::-webkit-scrollbar-thumb { background: var(--gold-dark); border-radius: 4px; border: 1px solid #2b1d0e; }

        /* Responsive */
        @media (max-width: 800px) {
            .grimoire {
                grid-template-columns: 1fr;
                height: auto;
                margin: 20px 0;
                border-width: 4px;
            }
            .altar-section {
                border-right: none;
                border-bottom: 2px dashed var(--gold-dark);
                padding-right: 0;
                padding-bottom: 40px;
            }
            .orb-container {
                width: 150px; height: 150px;
            }
            .mana-orb {
                width: 90px; height: 90px;
            }
        }
    </style>
</head>
<body>

    <div class="magic-dust">
        <div class="dust-mote" style="left:10%; animation-delay:0s;"></div>
        <div class="dust-mote" style="left:30%; animation-delay:2s;"></div>
        <div class="dust-mote" style="left:70%; animation-delay:4s;"></div>
        <div class="dust-mote" style="left:90%; animation-delay:1s;"></div>
    </div>

    <main class="grimoire">
        
        <!-- Left: The Altar -->
        <section class="parchment-screen altar-section" id="altarSection">
            <div class="corner-ornament tl"></div>
            <div class="corner-ornament tr"></div>
            <div class="corner-ornament bl"></div>
            <div class="corner-ornament br"></div>

            <h1 class="spell-header">Arcane Audio</h1>

            <div class="orb-container">
                <div class="runic-circle">
                    <div class="runic-ring"></div>
                    <div class="mana-orb"></div>
                </div>
            </div>

            <div class="scroll-data">
                <div class="scroll-title" id="arcaneTitle">Silence</div>
                <div class="scroll-artist" id="arcaneArtist">Awaiting Summoning</div>
            </div>

            <div class="mana-bar-container" id="manaBar">
                <div class="mana-fill" id="manaFill"></div>
            </div>
            <div style="display:flex; justify-content:space-between; font-size:0.8rem; color:#6b5344; margin-bottom:30px;">
                <span id="currentTime">00:00</span>
                <span>MANA</span>
                <span id="duration">00:00</span>
            </div>

            <div class="runic-controls">
                <button class="btn-rune" id="prevBtn">
                    <svg viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
                </button>
                <button class="btn-rune main-rune" id="playBtn">
                    <svg id="iconPlay" width="32" height="32" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                    <svg id="iconPause" width="32" height="32" viewBox="0 0 24 24" style="display:none;"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
                </button>
                <button class="btn-rune" id="stopBtn">
                    <svg viewBox="0 0 24 24"><rect x="6" y="6" width="12" height="12"/></svg>
                </button>
                <button class="btn-rune" id="nextBtn">
                    <svg viewBox="0 0 24 24"><path d="M6 18l8.5-6L6 6v12zm8.5-6l8.5 6V6z"/></svg>
                </button>
            </div>
        </section>

        <!-- Right: Quest Log -->
        <section class="parchment-screen quest-log">
            <div class="corner-ornament tl"></div>
            <div class="corner-ornament tr"></div>
            <div class="corner-ornament bl"></div>
            <div class="corner-ornament br"></div>

            <div class="log-title">Quest Log</div>
            <ul class="spell-list" id="spellList">
                <!-- JS Populated -->
            </ul>
        </section>

    </main>

    <script>
        const tracks = [
            {
                title: "I Just Called To Say I Love You",
                artist: "Stevie Wonder",
                url: "https://music.giau.info/mp3/1765329418087_I_Just_Called_To_Say_I_Love_You.mp3"
            },
            {
                title: "Another Day In Paradise",
                artist: "Phil Collins",
                url: "https://music.giau.info/mp3/1765329417208_Another_Day_In_Paradise.mp3"
            },
            {
                title: "If Life Is So Short",
                artist: "The Moffatts",
                url: "https://music.giau.info/mp3/1765329418894_If_Life_Is_So_Short.mp3"
            }
        ];

        let currentIndex = 0;
        let isPlaying = false;
        const audio = new Audio();

        // DOM
        const altarSection = document.getElementById('altarSection');
        const playBtn = document.getElementById('playBtn');
        const stopBtn = document.getElementById('stopBtn');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const iconPlay = document.getElementById('iconPlay');
        const iconPause = document.getElementById('iconPause');
        const arcaneTitle = document.getElementById('arcaneTitle');
        const arcaneArtist = document.getElementById('arcaneArtist');
        const manaFill = document.getElementById('manaFill');
        const manaBar = document.getElementById('manaBar');
        const currentTimeEl = document.getElementById('currentTime');
        const durationEl = document.getElementById('duration');
        const spellList = document.getElementById('spellList');

        function init() {
            renderSpellList();
            loadTrack(0);

            playBtn.addEventListener('click', togglePlay);
            stopBtn.addEventListener('click', stopTrack);
            prevBtn.addEventListener('click', prevTrack);
            nextBtn.addEventListener('click', nextTrack);

            audio.addEventListener('timeupdate', updateProgress);
            audio.addEventListener('loadedmetadata', () => {
                durationEl.innerText = formatTime(audio.duration);
            });
            audio.addEventListener('ended', nextTrack);

            manaBar.addEventListener('click', (e) => {
                const rect = manaBar.getBoundingClientRect();
                const pos = (e.clientX - rect.left) / rect.width;
                audio.currentTime = pos * audio.duration;
            });
        }

        function renderSpellList() {
            spellList.innerHTML = '';
            tracks.forEach((track, idx) => {
                const li = document.createElement('li');
                li.className = 'spell-card';
                li.innerHTML = `
                    <div class="card-content">
                        <div class="card-name">${track.title}</div>
                        <div class="card-sub">${track.artist}</div>
                    </div>
                `;
                li.addEventListener('click', () => {
                    if (currentIndex === idx && isPlaying) {
                        pauseTrack();
                    } else {
                        loadTrack(idx);
                        playTrack();
                    }
                });
                spellList.appendChild(li);
            });
        }

        function loadTrack(index) {
            currentIndex = index;
            const track = tracks[index];
            audio.src = track.url;
            
            arcaneTitle.innerText = track.title;
            arcaneArtist.innerText = track.artist;
            
            manaFill.style.width = "0%";
            currentTimeEl.innerText = "00:00";
            
            updateListUI();
        }

        function togglePlay() {
            if (isPlaying) pauseTrack();
            else playTrack();
        }

        function playTrack() {
            const p = audio.play();
            if (p !== undefined) {
                p.then(() => {
                    isPlaying = true;
                    altarSection.classList.add('playing');
                    iconPlay.style.display = 'none';
                    iconPause.style.display = 'block';
                }).catch(e => console.error(e));
            }
        }

        function pauseTrack() {
            audio.pause();
            isPlaying = false;
            altarSection.classList.remove('playing');
            iconPlay.style.display = 'block';
            iconPause.style.display = 'none';
        }

        function stopTrack() {
            pauseTrack();
            audio.currentTime = 0;
            updateProgress();
        }

        function prevTrack() {
            let idx = currentIndex - 1;
            if (idx < 0) idx = tracks.length - 1;
            loadTrack(idx);
            playTrack();
        }

        function nextTrack() {
            let idx = currentIndex + 1;
            if (idx >= tracks.length) idx = 0;
            loadTrack(idx);
            playTrack();
        }

        function updateProgress() {
            if (audio.duration) {
                const pct = (audio.currentTime / audio.duration) * 100;
                manaFill.style.width = `${pct}%`;
                currentTimeEl.innerText = formatTime(audio.currentTime);
            }
        }

        function formatTime(s) {
            if (!s || isNaN(s)) return "00:00";
            const m = Math.floor(s / 60);
            const sec = Math.floor(s % 60);
            return `${m}:${sec < 10 ? '0' : ''}${sec}`;
        }

        function updateListUI() {
            const items = document.querySelectorAll('.spell-card');
            items.forEach((item, idx) => {
                if (idx === currentIndex) item.classList.add('active');
                else item.classList.remove('active');
            });
        }

        init();
    </script>
</body>
</html>